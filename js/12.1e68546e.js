(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{0:function(e,t){},2:function(e,t){},3:function(e,t){},"6d6b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"row q-pa-lg"},[a("div",{staticClass:"col-lg-12 col-md-12 col-xs-12"},[a("q-card",{staticClass:"card-border-primary"},[a("q-card-section",[a("q-card",[a("q-card-section",{staticClass:" bg-primary"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-h5 text-left text-white text-weight-thin"},[e._v("\n                UERM COVID19 CORPORATE DASHBOARD FOR "+e._s(void 0!==e.loginInfo.Name?e.loginInfo.Name.toUpperCase():"")+"\n              ")]),a("div",[a("q-btn-group",[a("q-btn",{attrs:{push:"",icon:"fas fa-universal-access",color:"secondary"},on:{click:e.openReservationDialog}},[a("q-tooltip",[e._v("\n                      RESERVATION ACCESS\n                    ")])],1),a("q-btn",{attrs:{push:"",icon:"fas fa-cloud-upload-alt",color:"secondary"},on:{click:e.openUploadingDialog}},[a("q-tooltip",[e._v("\n                      UPLOADING\n                    ")])],1)],1)],1)])]),a("q-card-section",[a("div",{staticClass:"row q-col-gutter-xs"},[a("div",{staticClass:"col-lg-4 col-sm-12"},[a("q-card",{staticClass:"bg-orange",attrs:{square:""}},[a("q-card-section",[a("div",{staticClass:"row justify-center"},[a("q-icon",{staticClass:"text-white",staticStyle:{"font-size":"4rem"},attrs:{name:"fas fa-user-edit"}}),a("div",{staticClass:"q-pt-xs q-pl-md text-white text-center"},[a("span",{staticClass:"text-overline text-uppercase"},[e._v("Overall Accessibility Links Given")]),a("br"),a("span",{staticClass:"text-h5 text-weight-thin"},[e._v("\n                          "+e._s(e.corporateReservation.length)+"\n                        ")])])],1)])],1)],1),a("div",{staticClass:"col-lg-4 col-sm-12"},[a("q-card",{staticClass:"bg-green",attrs:{square:""}},[a("q-card-section",[a("div",{staticClass:"row justify-center"},[a("q-icon",{staticClass:"text-white",staticStyle:{"font-size":"4rem"},attrs:{name:"fas fa-user-check"}}),a("div",{staticClass:"q-pt-xs q-pl-md text-white text-center"},[a("span",{staticClass:"text-overline text-uppercase"},[e._v("Overall Employees Preregistered")]),a("br"),a("span",{staticClass:"text-h5 text-weight-thin"},[e._v("\n                          "+e._s(e.preRegisteredList.length-e.cancelledPreregistered.length)+"\n                        ")])])],1)])],1)],1),a("div",{staticClass:"col-lg-4 col-sm-12"},[a("q-card",{staticClass:"bg-negative",attrs:{square:""}},[a("q-card-section",[a("div",{staticClass:"row justify-center"},[a("q-icon",{staticClass:"text-white",staticStyle:{"font-size":"4rem"},attrs:{name:"fas fa-user-times"}}),a("div",{staticClass:"q-pt-xs q-pl-md text-white text-center"},[a("span",{staticClass:"text-overline text-uppercase"},[e._v("Overall Employees Cancelled")]),a("br"),a("span",{staticClass:"text-h5 text-weight-thin"},[e._v("\n                          "+e._s(e.cancelledPreregistered.length)+"\n                        ")])])],1)])],1)],1)])]),a("q-card-section",[a("q-tabs",{staticClass:"bg-primary text-white shadow-2",attrs:{"inline-label":"",breakpoint:0,align:"justify"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"accessibility",label:"Accessibility"}}),a("q-tab",{attrs:{name:"preregistered",label:"Preregistered"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"accessibility"}},[a("registration-accessibility",{attrs:{corporateReservation:e.corporateReservation}})],1),a("q-tab-panel",{attrs:{name:"preregistered"}},[a("preregistered",{attrs:{preRegisteredList:e.preRegisteredList}})],1)],1)],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:e.reservationDialog,callback:function(t){e.reservationDialog=t},expression:"reservationDialog"}},[a("corporate-reservation-dialog",{attrs:{corporateReservation:e.corporateReservation}})],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:e.uploadingDialog,callback:function(t){e.uploadingDialog=t},expression:"uploadingDialog"}},[a("uploading-file-dialog")],1)],1)])},i=[],o=a("ded3"),r=a.n(o),n=a("2f62"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticStyle:{width:"900px","max-width":"1500px"}},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-left text-h5 text-white text-weight-thin"},[e._v("\n        REGISTRATION ACCESSIBILITY\n      ")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close",color:"white"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("CLOSE")])],1)],1)]),a("q-form",{ref:"reservationInformation",staticClass:"q-gutter-md",on:{submit:e.onSubmitReservation}},[a("q-card-section",e._l(e.reservationData,(function(t,s){return a("div",{key:s,staticClass:"q-pt-md fit row wrap justify-start items-start content-start",attrs:{id:"parent"}},[a("div",{staticClass:"col-lg-5 col-xs-12 flex flex-center"},[a("q-input",{staticStyle:{width:"250px"},attrs:{square:"",outlined:"",type:"text",label:"Email Address",autocomplete:"off",rules:[function(e){return e&&e.length>0||"Please enter Email Address"}]},model:{value:t.email,callback:function(a){e.$set(t,"email",a)},expression:"input.email"}})],1),a("div",{staticClass:"col-lg-5 col-xs-12 flex flex-center"},[a("q-input",{staticStyle:{width:"250px"},attrs:{square:"",outlined:"",type:"number",label:"Mobile Number",rules:[function(e){return e&&e.length>0||"Please enter Mobile Number"}]},model:{value:t.mobileNumber,callback:function(a){e.$set(t,"mobileNumber",a)},expression:"input.mobileNumber"}})],1),a("div",{staticClass:"col-lg-2 col-xs-12 q-pb-lg flex flex-center"},[a("q-btn",{attrs:{round:"",color:"negative",icon:"fas fa-user-times"},on:{click:function(t){return e.removeEmployee(s)}}},[a("q-tooltip",{attrs:{"content-class":"bg-orange text-white"}},[e._v("REMOVE EMPLOYEE")])],1)],1)])})),0),a("q-card-actions",{staticClass:"flex flex-center"},[a("div",{staticClass:"q-pa-md q-gutter-y-md column items-start"},[a("q-btn-group",[a("q-btn",{attrs:{color:"primary",disable:e.formLoading,label:"Add Employee",icon:"add_circle"},on:{click:function(t){return e.addEmployee()}}}),a("q-btn",{attrs:{type:"submit",loading:e.formLoading,disable:e.buttonDisable,icon:"fas fa-users",color:"primary"},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-hourglass",{staticClass:"on-left"}),e._v("\n              Sending..\n            ")]},proxy:!0}])},[a("span",{staticClass:"q-pl-md"},[e._v("SEND LINK")])])],1)],1)]),a("q-card-section",[e.formMessage.length>0?a("q-banner",{staticClass:"text-white bg-green",attrs:{"inline-actions":""}},[a("q-icon",{staticClass:"q-pr-md",attrs:{name:"check",size:"lg"}}),e._v("\n        "+e._s(e.formMessage)+"\n      ")],1):e._e()],1)],1)],1)},c=[],d=(a("ddb0"),{name:"CorporateReservationDialog",data(){return{pendingAccessReservation:null,reservationData:[{email:null,mobileNumber:null,accessed:0,submitted:0,reservationType:"CORPORATE",company:null}],formLoading:null,formMessage:[],buttonDisable:!1}},computed:r()({},Object(n["b"])("corporate",["loginInfo"])),created(){this.onSetInit()},watch:{reservationData:{async handler(e){0===e.length?this.buttonDisable=!0:this.buttonDisable=!1},deep:!0}},methods:{onSetInit(){this.reservationData=[];var e={email:null,mobileNumber:null,accessed:0,submitted:0,reservationType:"CORPORATE",company:null};this.reservationData.push(e)},async onSubmitReservation(){this.$refs.reservationInformation.validate().then((async e=>{if(e){for(var t of(this.formLoading=!0,this.reservationData)){t.company=this.loginInfo.ShortCode;var a=await this.$store.dispatch("corporate/saveReservationAccessCorporate",t);if(void 0!==a.message){const e={email:t.email,mobileNumber:t.mobileNumber,accessed:"0",submitted:"0",reservationType:t.reservationType,hashKey:a.hashKey,subject:`UERM Corporate Reservation for ${this.loginInfo.Name}`,title:"UERM Corporate Vaccine Reservation",message:`You may use this one-time access link to sign up, note that you can access this on one device only. Once submitted you cannot access this link anymore, in case of wrong entry of some details, please contact your coordinator from ${this.loginInfo.Name}.<br><br>\nhttps://apps.uerm.edu.ph/vue/covid-vaccination/#/vaccination-corporate/${this.loginInfo.ShortCode}/${a.hashKey}`,name:"To whom it may concern,"};var s=await this.$store.dispatch("sendEmail",e),i={messageType:"sms",destination:t.mobileNumber,text:`Hi, this from the UERM Vaccine Team, you may use this one-time access link to sign up, note that you can access this on one device only. Once submitted you cannot access this link anymore, in case of wrong entry of some details, please contact your coordinator from ${this.loginInfo.Name}. \r\n\nhttps://apps.uerm.edu.ph/vue/covid-vaccination/#/vaccination-corporate/${this.loginInfo.ShortCode}/${a.hashKey}`,name:"To whom it may concern,"};this.sendTextMessage(i)}}"success"===s.Messages[0].Status?(this.formMessage="Employees successfully given access to the registration.",this.onSetInit()):(this.formMessage="Error sending email",this.formLoading=!1),this.formLoading=!1}}))},async sendTextMessage(e){const t=this.$q.localStorage.getItem("smartAccessToken");if(null===t){const t=await this.$store.dispatch("setTextMessagingAuthentication");if(t.accessToken.length>0)return await this.$store.dispatch("sendTextMessage",e),{message:"success"};{const t=await this.$store.dispatch("refreshTextToken");if(t.accessToken.length>0)return await this.$store.dispatch("sendTextMessage",e),{message:"success"}}}else{const t=await this.$store.dispatch("sendTextMessage",e);if("Error"===t.name){const t=await this.$store.dispatch("refreshTextToken");if("Error"===t.name)return await this.$store.dispatch("setTextMessagingAuthentication"),await this.$store.dispatch("sendTextMessage",e),{message:"success"}}}},addEmployee(){var e={email:null,mobileNumber:null,accessed:0,submitted:0,reservationType:"CORPORATE",company:null};this.reservationData.push(e)},removeEmployee(e){const t=Array.from(this.reservationData);t.splice(e,1),this.reservationData=t}}}),m=d,u=a("2877"),p=a("f09f"),h=a("a370"),g=a("9c40"),f=a("05c0"),b=a("0378"),v=a("27f9"),y=a("4b7e"),x=a("e7a9"),C=a("9149"),E=a("54e1"),w=a("0016"),q=a("7f67"),I=a("eebe"),P=a.n(I),F=Object(u["a"])(m,l,c,!1,null,null,null),_=F.exports;P()(F,"components",{QCard:p["a"],QCardSection:h["a"],QBtn:g["a"],QTooltip:f["a"],QForm:b["a"],QInput:v["a"],QCardActions:y["a"],QBtnGroup:x["a"],QSpinnerHourglass:C["a"],QBanner:E["a"],QIcon:w["a"]}),P()(F,"directives",{ClosePopup:q["a"]});var R=a("89e6"),D=a("8674"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"1150px","max-width":"100vw"}},[a("q-card",{staticClass:"text-white"},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-left text-h5 text-white text-weight-thin"},[e._v("\n          UPLOAD FILES\n        ")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("CLOSE")])],1)],1)]),a("q-card-section",[a("q-tabs",{staticClass:"bg-primary",attrs:{"active-color":"white","indicator-color":"white",align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"preregistered",icon:"fas fa-file",label:"CEIR Format"}}),a("q-tab",{attrs:{name:"emailAndContactNumbers",icon:"fas fa-envelope-open-text",label:"Email and Contact Number"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"preregistered"}},[a("q-card",{staticStyle:{"max-height":"700px","overflow-y":"auto"}},[a("q-card-section",{staticClass:" bg-primary"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-left text-h5 text-white text-weight-thin"},[e._v("\n                  CEIR FORMAT\n                ")]),a("q-btn",{attrs:{push:"",icon:"fas fa-download",color:"secondary"},on:{click:e.downloadCEIR}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("DOWNLOAD CEIR FORMAT")])],1)],1)]),a("q-card-section",[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[a("q-card-section",[a("div",[a("q-file",{ref:"file",attrs:{square:"",outlined:"",label:"CEIR Format"},scopedSlots:e._u([e.ceirFormat?{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.ceirFormat=null}}})]},proxy:!0}:null],null,!0),model:{value:e.ceirFormat,callback:function(t){e.ceirFormat=t},expression:"ceirFormat"}}),a("q-card",{directives:[{name:"show",rawName:"v-show",value:e.showParsedCEIRData,expression:"showParsedCEIRData"}],staticClass:"q-mt-md"},[a("q-form",{ref:"preRegistered",staticClass:"q-gutter-md",on:{submit:e.onSubmitPreregistered}},[a("q-card-section",[a("div",{staticClass:"flex flex-center"},[a("q-chip",{attrs:{outline:"",color:"green","text-color":"white",icon:"fas fa-file-import"}},[e._v("\n                              "+e._s(null!==e.ceirFormatParsed?e.ceirFormatParsed.length:"")+" DATA PARSED\n                            ")])],1),e._l(e.ceirFormatParsed,(function(t,s){return a("div",{key:s,attrs:{id:"parent"}},[a("div",{staticClass:"q-pt-md fit row wrap justify-start items-start content-start"},[a("div",{staticClass:"col-lg-12"},[a("q-card",[a("q-card-section",{staticClass:"bg-primary text-white"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-left text-h6 text-white text-weight-thin cursor-pointer",on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                                        "+e._s(t.Firstname)+" "+e._s(t.Lastname)+" - "+e._s(t.CategoryIDnumber)+"\n                                      ")]),a("q-btn-group",[a("q-btn",{attrs:{color:"negative",push:"",icon:"fas fa-user-times"},on:{click:function(t){return e.removeEmployeeCEIR(s)}}},[a("q-tooltip",{attrs:{"content-class":"bg-orange text-white"}},[e._v("REMOVE EMPLOYEE")])],1),a("q-btn",{attrs:{color:"secondary",push:"",icon:t.expanded?"keyboard_arrow_up":"keyboard_arrow_down"},on:{click:function(e){t.expanded=!t.expanded}}})],1)],1)]),a("q-slide-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"input.expanded"}]},[a("q-card-section",{staticClass:"bg-white"},[a("q-input",{attrs:{square:"",outlined:"",type:"text",label:"Firstname",autocomplete:"off",readonly:""},model:{value:t["CategoryIDnumber"],callback:function(a){e.$set(t,"CategoryIDnumber",a)},expression:"input['CategoryIDnumber']"}}),a("q-input",{attrs:{square:"",outlined:"",type:"text",label:"Firstname",autocomplete:"off",readonly:""},model:{value:t["Firstname"],callback:function(a){e.$set(t,"Firstname",a)},expression:"input['Firstname']"}}),a("q-input",{attrs:{square:"",outlined:"",type:"text",label:"Lastname",readonly:""},model:{value:t["Lastname"],callback:function(a){e.$set(t,"Lastname",a)},expression:"input['Lastname']"}})],1)],1)])],1),t.categoryMessage.length>0?a("div",[a("q-banner",{staticClass:"text-white bg-negative",attrs:{"inline-actions":""}},[a("q-icon",{staticClass:"q-pr-md",attrs:{name:"fas fa-user-times",size:"lg"}}),e._v("\n                                    "+e._s(t.categoryMessage)+"\n                                  ")],1)],1):e._e()],1)])])}))],2),a("q-card-actions",{staticClass:"flex flex-center"},[a("q-btn",{staticStyle:{width:"200px"},attrs:{loading:e.ceirButtonLoading,icon:"fas fa-paper-plane",color:"primary"},on:{click:e.onSubmitPreregistered},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-hourglass",{staticClass:"on-left"}),e._v("\n                              SAVING..\n                            ")]},proxy:!0}])},[a("span",{staticClass:"q-pl-md"},[e._v("SAVE EMPLOYEE(S)")])])],1)],1)],1)],1)])],1),a("q-inner-loading",{attrs:{showing:e.ceirFormatLoading}},[a("q-spinner-puff",{attrs:{size:"50px",color:"primary"}})],1)],1),e.ceirMessage.length>0?a("q-card-section",[a("q-banner",{staticClass:"text-white bg-green",attrs:{"inline-actions":""}},[a("q-icon",{staticClass:"q-pr-md",attrs:{name:"fas fa-check-circle",size:"lg"}}),e._v("\n                "+e._s(e.ceirMessage)+"\n              ")],1)],1):e._e()],1)],1),a("q-tab-panel",{attrs:{name:"emailAndContactNumbers"}},[a("q-card",{staticStyle:{"max-height":"700px","overflow-y":"auto"}},[a("q-card-section",{staticClass:" bg-primary"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-left text-h5 text-white text-weight-thin"},[e._v("\n                  EMAIL AND CONTACT NUMBER FORMAT\n                ")]),a("q-btn",{attrs:{push:"",icon:"fas fa-download",color:"secondary"},on:{click:e.downloadExcelFormat}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("DOWNLOAD EMAIL AND CONTACT NUMBER EXCEL FORMAT")])],1)],1)]),a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[a("q-card-section",[a("div",[a("q-file",{ref:"file",attrs:{square:"",outlined:"",label:"Email and Contact # Excel Format"},scopedSlots:e._u([e.excelEmailFormat?{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.excelEmailFormat=null}}})]},proxy:!0}:null],null,!0),model:{value:e.excelEmailFormat,callback:function(t){e.excelEmailFormat=t},expression:"excelEmailFormat"}}),a("q-card",{directives:[{name:"show",rawName:"v-show",value:e.showParsedEmailData,expression:"showParsedEmailData"}],staticClass:"q-mt-md"},[a("q-form",{ref:"sendLinks",staticClass:"q-gutter-md",on:{submit:e.onSubmitSendLinks}},[a("q-card-section",[a("div",{staticClass:"flex flex-center"},[a("q-chip",{attrs:{outline:"",color:"green","text-color":"white",icon:"fas fa-file-import"}},[e._v("\n                            "+e._s(null!==e.excelEmailFormatParsed?e.excelEmailFormatParsed.length:"")+" DATA PARSED\n                          ")])],1),e._l(e.excelEmailFormatParsed,(function(t,s){return a("div",{key:s,staticClass:"q-pt-md fit row wrap justify-start items-start content-start",attrs:{id:"parent"}},[a("div",{staticClass:"col-lg-2 col-xs-12 q-pt-sm flex flex-center"},[a("q-btn",{attrs:{color:"negative",icon:"fas fa-user",label:s+1},on:{click:function(t){return e.removeEmployee(s)}}},[a("q-tooltip",{attrs:{"content-class":"bg-orange text-white"}},[e._v("REMOVE EMPLOYEE")])],1)],1),a("div",{staticClass:"col-lg-4 col-xs-12 flex flex-center"},[a("q-input",{staticStyle:{width:"250px"},attrs:{square:"",outlined:"",type:"text",label:"Email Address",autocomplete:"off",rules:[function(e){return e&&e.length>0||"Please enter Email Address"}]},model:{value:t["Email Address"],callback:function(a){e.$set(t,"Email Address",a)},expression:"input['Email Address']"}})],1),a("div",{staticClass:"col-lg-4 col-xs-12 flex flex-center"},[a("q-input",{staticStyle:{width:"250px"},attrs:{square:"",outlined:"",type:"number",label:"Mobile Number",rules:[function(e){return e&&e.length>0||"Please enter Mobile Number"}]},model:{value:t["Contact Number"],callback:function(a){e.$set(t,"Contact Number",a)},expression:"input['Contact Number']"}})],1),a("div",{staticClass:"col-lg-2 col-xs-12 q-pb-md flex flex-center"},[a("q-btn",{attrs:{round:"",color:"negative",icon:"fas fa-user-times"},on:{click:function(t){return e.removeEmployee(s)}}},[a("q-tooltip",{attrs:{"content-class":"bg-orange text-white"}},[e._v("REMOVE EMPLOYEE")])],1)],1)])}))],2),a("q-card-actions",{staticClass:"flex flex-center"},[a("q-btn",{staticStyle:{width:"180px"},attrs:{type:"submit",loading:e.excelEmailButtonLoading,icon:"fas fa-paper-plane",color:"primary"},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-hourglass",{staticClass:"on-left"}),e._v("\n                            SENDING..\n                          ")]},proxy:!0}])},[a("span",{staticClass:"q-pl-md"},[e._v("SEND LINK(S)")])])],1)],1)],1)],1)])],1),a("q-inner-loading",{attrs:{showing:e.excelEmailFormatLoading}},[a("q-spinner-puff",{attrs:{size:"50px",color:"primary"}})],1),e.excelEmailMessage.length>0?a("q-card-section",[a("q-banner",{staticClass:"text-white bg-green",attrs:{"inline-actions":""}},[a("q-icon",{staticClass:"q-pr-md",attrs:{name:"fas fa-check-circle",size:"lg"}}),e._v("\n                "+e._s(e.excelEmailMessage)+"\n              ")],1)],1):e._e()],1)],1)],1)],1)],1)],1)},A=[],N=a("1146"),T=a.n(N),M={name:"UploadingFileDialog",data(){return{tab:"preregistered",splitterModel:20,ceirFile:"/files/Masterlisting Worksheet.xlsx",emailExcelFormat:"/files/Email Address and Contact Numbers Excel Format.xlsx",excelData:null,excelEmailFormat:null,excelEmailFormatLoading:!1,excelEmailFormatParsed:null,excelEmailButtonLoading:null,excelEmailMessage:[],showParsedEmailData:!1,ceirFormat:null,ceirFormatLoading:!1,ceirFormatParsed:null,ceirButtonLoading:null,ceirMessage:[],showParsedCEIRData:!1}},watch:{tab(e){},excelEmailFormatLoading(e){e&&(this.showParsedEmailData=!1)},excelEmailFormatParsed:{async handler(e){null!==e&&0===e.length&&(this.showParsedEmailData=!1)},deep:!0},excelEmailFormat(e){this.excelEmailFormatLoading=!0,null===e||void 0===e?(this.excelEmailFormatParsed=null,this.showParsedEmailData=!1,this.excelEmailFormatLoading=!1):0===e.length?this.excelEmailFormatLoading=!1:this.formatEmailExcel()},ceirFormat(e){this.ceirFormatLoading=!0,null===e||void 0===e?(this.ceirFormatParsed=null,this.showParsedCEIRData=!1,this.ceirFormatLoading=!1):0===e.length?this.ceirFormatLoading=!1:this.formatCEIRExcel()}},computed:r()({},Object(n["b"])("corporate",["loginInfo"])),methods:{onSetInitEmailContactNumbers(){this.excelEmailFormat=null,this.excelEmailFormatLoading=!1,this.excelEmailFormatParsed=null,this.showParsedEmailData=!1},onSetInitCEIR(){this.ceirFormat=null,this.ceirFormatLoading=!1,this.ceirFormatParsed=null,this.showParsedCEIRData=!1},downloadCEIR(){window.location=this.ceirFile},downloadExcelFormat(){window.location=this.emailExcelFormat},formatEmailExcel(){this.excelEmailFormatParsed=null,this.excelEmailMessage=[];var e=event.target,t=new FileReader;t.readAsBinaryString(e.files[0]),t.onload=()=>{var e=t.result,a=T.a.read(e,{type:"binary"});a.SheetNames.forEach((e=>{var t=T.a.utils.sheet_to_json(a.Sheets.Sheet1);this.excelEmailFormatParsed=t}))},setTimeout((()=>{this.excelEmailFormat=[],this.excelEmailFormatLoading=!1,this.showParsedEmailData=!0}),3e3)},formatCEIRExcel(){this.ceirFormatParsed=null,this.ceirMessage=[];var e=event.target,t=new FileReader;t.readAsBinaryString(e.files[0]),t.onload=()=>{var e=t.result,a=T.a.read(e,{type:"binary"}),s=T.a.utils.sheet_to_json(a.Sheets["Eligible Population"]),i=[];for(var[o,r]of s.entries())if(0!==o){var n=`UERM-${r.CategoryIDnumber}-CORPORATE-${this.loginInfo.ShortCode}`;r.category=r.Category,r.categoryID=r.CategoryID,r.categoryIDNumber=r.CategoryIDnumber,r.philhealthID=r.PhilHealthID,r.pwdID=r.PWD_ID,r.lastName=r.Lastname,r.firstName=r.Firstname,r.middleName=void 0===r.Middlename?"":r.Middlename,r.suffix=void 0===r.Suffix?"":r.Suffix,r.gender=r.Sex,r.birthdate=r.Birthdate_,r.civilStatus=r.Civilstatus,r.contactNumber=r.Contact_no,r.fullAddress=r.Full_address,r.region=r.Region,r.province=r.Province,r.city=r.MunCity,r.barangay=r.Barangay,r.employmentStatus=r.Employed,r.directCovid=r.Direct_covid,r.profession=r.Profession,r.pregnancy=r.Preg_status,r.drugAllergy=r.Allergy_01,r.foodAllergy=r.Allergy_02,r.insectAllergy=r.Allergy_03,r.latexAllergy=r.Allergy_04,r.moldAllergy=r.Allergy_05,r.petAllergy=r.Allergy_06,r.pollenAllergy=r.Allergy_07,r.withComorbidity=r.W_comorbidities,r.hypertension=r.Comorbidity_01,r.heartDisease=r.Comorbidity_02,r.kidneyDisease=r.Comorbidity_03,r.diabetesMellitus=r.Comorbidity_04,r.bronchialAsthma=r.Comorbidity_05,r.immunodeficiencyStatus=r.Comorbidity_06,r.cancer=r.Comorbidity_07,r.others=r.Comorbidity_08,r.patientDiagnosedWithCovid=void 0===r.covid_history?"":r.covid_history,r.classificationOfCovid=void 0===r.covid_classification?"":r.covid_classification,r.dateOfCovid=void 0===r.covid_date?"":r.covid_date,r.providedConsent=void 0===r.Consent?"":r.Consent,r.companyName=this.loginInfo.Name,r.companyProvince=this.loginInfo.Province,r.companyAddress=this.loginInfo.Address,r.companyContactNumber=this.loginInfo.ContactNumber,r.householdMemberCategory=`CORPORATE-${this.loginInfo.ShortCode}`,r.referringCategory=this.loginInfo.ShortCode,r.referringEmployeeID=this.loginInfo.Id,r.referringEmployeeName=`${this.loginInfo.FirstName} ${this.loginInfo.LastName}`,r.referringEmployeeEmail=this.loginInfo.UserName,r.referringEmployeeContactNumber=this.loginInfo.ContactNumber,r.qrCode=n,r.expanded=!1,r.categoryMessage=[],i.push(r)}this.ceirFormatParsed=i},setTimeout((()=>{this.ceirFormat=[],this.ceirFormatLoading=!1,this.showParsedCEIRData=!0}),3e3)},removeEmployeeCEIR(e){const t=Array.from(this.ceirFormatParsed);t.splice(e,1),this.ceirFormatParsed=t},removeEmployee(e){const t=Array.from(this.excelEmailFormatParsed);t.splice(e,1),this.excelEmailFormatParsed=t},onSubmitSendLinks(){this.$refs.sendLinks.validate().then((async e=>{if(e){for(var t of(this.excelEmailButtonLoading=!0,this.excelEmailFormatParsed)){t.email=t["Email Address"],t.mobileNumber=t["Contact Number"],t.accessed=0,t.submitted=0,t.reservationType="CORPORATE",t.company=this.loginInfo.ShortCode;var a=await this.$store.dispatch("corporate/saveReservationAccessCorporate",t);if(void 0!==a.message){const e={email:t.email,mobileNumber:t.mobileNumber,accessed:"0",submitted:"0",reservationType:t.reservationType,hashKey:a.hashKey,subject:`UERM Corporate Reservation for ${this.loginInfo.Name}`,title:"UERM Corporate Vaccine Reservation",message:`You may use this one-time access link to sign up, note that you can access this on one device only. Once submitted you cannot access this link anymore, in case of wrong entry of some details, please contact your coordinator from ${this.loginInfo.Name}.<br><br>\nhttps://apps.uerm.edu.ph/vue/covid-vaccination/#/vaccination-corporate/${this.loginInfo.ShortCode}/${a.hashKey}`,name:"To whom it may concern,"};var s=await this.$store.dispatch("sendEmail",e),i={messageType:"sms",destination:t.mobileNumber,text:`Hi, this from the UERM Vaccine Team, you may use this one-time access link to sign up, note that you can access this on one device only. Once submitted you cannot access this link anymore, in case of wrong entry of some details, please contact your coordinator from ${this.loginInfo.Name}. \r\n\nhttps://apps.uerm.edu.ph/vue/covid-vaccination/#/vaccination-corporate/${this.loginInfo.ShortCode}/${a.hashKey}`,name:"To whom it may concern,"};this.sendTextMessage(i)}}"success"===s.Messages[0].Status?(this.excelEmailMessage="Employees successfully given access to the registration.",this.onSetInitEmailContactNumbers()):(this.excelEmailMessage="Error sending email",this.excelEmailButtonLoading=!1),this.excelEmailButtonLoading=!1}}))},onSubmitPreregistered(){this.$refs.preRegistered.validate().then((async e=>{for(var[t,a]of(this.ceirButtonLoading=!0,this.ceirFormatParsed.entries()))this.searchCategoryID(a.categoryIDNumber,t),a.categoryMessage.length>0&&(a.expanded=!0),console.log(a);this.ceirButtonLoading=!1}))},async searchCategoryID(e,t){if(null!==this.ceirFormatParsed[t].categoryIDNumber)if(""!==this.ceirFormatParsed[t].categoryIDNumber){console.log(e);const s=await this.$store.dispatch("checkEmployee",e);if(0!==s.employeeFound)return this.ceirFormatParsed[t].categoryMessage=`ERROR: ${e} is already on our record. Please enter a different Category ID Number.`,void(this.ceirFormatParsed[t].expanded=!0);{const a=await this.$store.dispatch("checkVaccineeForApproval",e);if(0!==a.employeeFound)return this.ceirFormatParsed[t].categoryMessage=`ERROR: ${e} is already on our record. Please enter a different Category ID Number.`,void(this.ceirFormatParsed[t].expanded=!0);this.ceirFormatParsed[t].categoryMessage=`SUCCESS: ${e} is available and not on our record`}for(var a=0;a<this.ceirFormatParsed.length;a++)if(t===a)this.ceirFormatParsed[t].categoryMessage=`SUCCESS: ${e} is available and not on our record`;else{const s="categoryIDNumber";if(Object.prototype.hasOwnProperty.call(this.ceirFormatParsed[a],s)&&this.ceirFormatParsed[a].categoryIDNumber===e)return this.ceirFormatParsed[t].categoryMessage=`ERROR: ${e} already entered. Please enter a different Category ID Number.`,void(this.ceirFormatParsed[t].expanded=!0)}}else this.ceirFormatParsed[t].categoryMessage=null},async sendTextMessage(e){const t=this.$q.localStorage.getItem("smartAccessToken");if(null===t){const t=await this.$store.dispatch("setTextMessagingAuthentication");if(t.accessToken.length>0)return await this.$store.dispatch("sendTextMessage",e),{message:"success"};{const t=await this.$store.dispatch("refreshTextToken");if(t.accessToken.length>0)return await this.$store.dispatch("sendTextMessage",e),{message:"success"}}}else{const t=await this.$store.dispatch("sendTextMessage",e);if("Error"===t.name){const t=await this.$store.dispatch("refreshTextToken");if("Error"===t.name)return await this.$store.dispatch("setTextMessagingAuthentication"),await this.$store.dispatch("sendTextMessage",e),{message:"success"}}}}}},k=M,L=a("429b"),$=a("7460"),O=a("eb85"),Q=a("adad"),j=a("823b"),B=a("7d53"),U=a("b047"),V=a("e9c1"),K=a("74f7"),z=a("06d5"),G=Object(u["a"])(k,S,A,!1,null,null,null),Y=G.exports;P()(G,"components",{QCard:p["a"],QCardSection:h["a"],QBtn:g["a"],QTooltip:f["a"],QTabs:L["a"],QTab:$["a"],QSeparator:O["a"],QTabPanels:Q["a"],QTabPanel:j["a"],QFile:B["a"],QIcon:w["a"],QForm:b["a"],QChip:U["a"],QBtnGroup:x["a"],QSlideTransition:V["a"],QInput:v["a"],QBanner:E["a"],QCardActions:y["a"],QSpinnerHourglass:C["a"],QInnerLoading:K["a"],QSpinnerPuff:z["a"]}),P()(G,"directives",{ClosePopup:q["a"]});var H={components:{CorporateReservationDialog:_,RegistrationAccessibility:D["a"],Preregistered:R["a"],UploadingFileDialog:Y},name:"CorporateDashboard",computed:r()({},Object(n["b"])("corporate",["loginInfo","preRegisteredList","corporateReservation","cancelledPreregistered"])),data(){return{tab:"accessibility",reservationDialog:!1,uploadingDialog:!1}},watch:{tab(e){this.getReservationAccessibility(),this.getCompanyPreregistrationList()},loginInfo(e){this.getReservationAccessibility(),this.getCompanyPreregistrationList()},reservationDialog(e){e||(this.getReservationAccessibility(),this.getCompanyPreregistrationList())}},methods:{openUploadingDialog(){this.uploadingDialog=!0},openReservationDialog(){this.reservationDialog=!0},async getReservationAccessibility(){const e={email:null,company:void 0!==this.loginInfo.ShortCode?this.loginInfo.ShortCode:null};await this.$store.dispatch("corporate/getReservationAccessibility",e)},async checkCorporateEmployee(){const e=this.$q.cookies.has("username");if(console.log(e),e){const e={username:this.$q.cookies.get("username").replaceAll(" ","_"),checking:!0};await this.$store.dispatch("corporate/loginCorporate",e)}else this.$router.push("/vaccine-application-corporate")},async getCompanyPreregistrationList(){await this.$store.dispatch("corporate/getPreregisteredList",this.loginInfo.Name)}}},W=H,J=a("9989"),X=a("24e8"),Z=Object(u["a"])(W,s,i,!1,null,null,null);t["default"]=Z.exports;P()(Z,"components",{QPage:J["a"],QCard:p["a"],QCardSection:h["a"],QBtnGroup:x["a"],QBtn:g["a"],QTooltip:f["a"],QIcon:w["a"],QTabs:L["a"],QTab:$["a"],QSeparator:O["a"],QTabPanels:Q["a"],QTabPanel:j["a"],QDialog:X["a"]})}}]);