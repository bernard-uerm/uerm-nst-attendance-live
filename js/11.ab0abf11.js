(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{1373:function(t,e,a){"use strict";a("895e")},"895e":function(t,e,a){},febf:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"row q-pa-lg"},[a("div",{staticClass:"col-lg-12 col-md-12 col-xs-12"},[a("q-card",{staticClass:"card-border-primary"},[a("q-card-section",[a("q-card",[a("q-card-section",{staticClass:" bg-primary"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-h5 text-left text-white text-weight-thin"},[t._v("\n                UERM COVID19 ADMIN CORPORATE DASHBOARD\n              ")]),a("div",[a("q-btn-group",[a("q-btn",{attrs:{push:"",icon:"fas fa-plus-circle",color:"secondary"},on:{click:t.openCompanyModal}},[a("q-tooltip",[t._v("\n                      ADD NEW COMPANY\n                    ")])],1),a("q-btn",{attrs:{push:"",icon:"fas fa-file-upload",color:"secondary"},on:{click:t.openUploadModal}},[a("q-tooltip",[t._v("\n                      UPLOAD\n                    ")])],1)],1)],1)])])],1)],1),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12 col-xs-12 q-pa-md"},[a("q-table",{staticStyle:{"max-height":"415px","overflow-y":"auto"},attrs:{dense:"","virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0],data:t.rawCompanies,columns:t.columns,"row-key":"Name",filter:t.filter,selection:"single",selected:t.selected,loading:t.loading,title:"Corporate Users"},on:{"update:pagination":function(e){t.pagination=e},"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{attrs:{"auto-width":""}},[a("q-toggle",{attrs:{"checked-icon":"add","unchecked-icon":"remove"},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),a("q-td",{key:"companyName",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.Name)+"\n                  ")]),a("q-td",{key:"contactNumber",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.ContactNumber)+"\n                  ")]),a("q-td",{key:"contactPerson",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.FirstName)+" "+t._s(e.row.MiddleName)+" "+t._s(e.row.LastName)+"\n                  ")]),a("q-td",{key:"contactPersonUsername",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.UserName)+"\n                  ")]),a("q-td",{key:"active",attrs:{props:e}},[e.row.IsActive?a("q-chip",{attrs:{outline:"",color:"green","text-color":"white",icon:"fas fa-user-check"}},[t._v("\n                      Enabled\n                    ")]):a("q-chip",{attrs:{outline:"",color:"negative","text-color":"white",icon:"fas fa-user-times"}},[t._v("\n                      Disabled\n                    ")])],1)],1)]}}])})],1)])])],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:t.companyModal,callback:function(e){t.companyModal=e},expression:"companyModal"}},[a("company-registration-dialog")],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:t.corporateModal,callback:function(e){t.corporateModal=e},expression:"corporateModal"}},[a("admin-corporate-details-dialog",{attrs:{corporateDetails:t.corporateDetails}})],1),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:t.uploadModal,callback:function(e){t.uploadModal=e},expression:"uploadModal"}},[a("div",{staticStyle:{width:"1150px","max-width":"100vw"}},[a("q-card",{staticClass:"text-white"},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-left text-h5 text-white text-weight-thin"},[t._v("\n                UPLOAD FILES\n              ")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("CLOSE")])],1)],1)]),a("q-card-section",[a("div",{staticClass:"text-h3 text-weight-thin text-black text-center"},[t._v("\n              FEATURE UNDER DEVELOPMENT\n            ")])])],1)],1)])],1)])},o=[],n=a("ded3"),i=a.n(n),r=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"1150px","max-width":"100vw"}},[a("q-card",{staticClass:"text-white"},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-left text-h5 text-white text-weight-thin"},[t._v("\n          "+t._s(void 0!==t.corporateDetails[0].Name?t.corporateDetails[0].Name.toUpperCase():"")+"\n        ")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("CLOSE")])],1)],1)]),a("q-card-section",{staticClass:"text-black"},[a("div",{staticClass:"row q-col-gutter-xs"},[a("div",{staticClass:"col-lg-4 col-xs-12 col-sm-12"},[a("q-card",{staticClass:"bg-orange",attrs:{square:""}},[a("q-card-section",[a("div",{staticClass:"row justify-center"},[a("q-icon",{staticClass:"text-white",staticStyle:{"font-size":"3rem"},attrs:{name:"fas fa-user-edit"}}),a("div",{staticClass:"q-pt-xs q-pl-md text-white text-center"},[a("span",{staticClass:"text-overline text-uppercase"},[t._v("Accessibility Links")]),a("br"),a("span",{staticClass:"text-h5 text-weight-thin"},[t._v("\n                    "+t._s(t.corporateReservation.length)+"\n                  ")])])],1)])],1)],1),a("div",{staticClass:"col-lg-4 col-xs-12 col-sm-12"},[a("q-card",{staticClass:"bg-green",attrs:{square:""}},[a("q-card-section",[a("div",{staticClass:"row justify-center"},[a("q-icon",{staticClass:"text-white",staticStyle:{"font-size":"3rem"},attrs:{name:"fas fa-user-edit"}}),a("div",{staticClass:"q-pt-xs q-pl-md text-white text-center"},[a("span",{staticClass:"text-overline text-uppercase"},[t._v("PREREGISTERED")]),a("br"),a("span",{staticClass:"text-h5 text-weight-thin"},[t._v("\n                    "+t._s(t.preRegisteredList.length-t.cancelledPreregistered.length)+"\n                  ")])])],1)])],1)],1),a("div",{staticClass:"col-lg-4 col-xs-12 col-sm-12"},[a("q-card",{staticClass:"bg-negative",attrs:{square:""}},[a("q-card-section",[a("div",{staticClass:"row justify-center"},[a("q-icon",{staticClass:"text-white",staticStyle:{"font-size":"3rem"},attrs:{name:"fas fa-user-times"}}),a("div",{staticClass:"q-pt-xs q-pl-md text-white text-center"},[a("span",{staticClass:"text-overline text-uppercase"},[t._v("CANCELLED")]),a("br"),a("span",{staticClass:"text-h5 text-weight-thin"},[t._v("\n                    "+t._s(t.cancelledPreregistered.length)+"\n                  ")])])],1)])],1)],1)])]),a("q-card-section",[a("q-expansion-item",{staticClass:"shadow-1 overflow-hidden q-mb-md",staticStyle:{"border-radius":"30px"},attrs:{"expand-separator":"",icon:"fas fa-user",label:null!==t.accountDetails.companyName?t.accountDetails.companyName.toUpperCase()+" ACCOUNT DETAILS":"",group:"somegroup","header-class":"bg-primary text-white","default-opened":""}},[a("q-card",[a("q-form",{ref:"reservationInformation",staticClass:"q-gutter-md",on:{submit:t.onSubmitAccountUpdate}},[a("q-card-section",{staticClass:"text-black"},[a("q-input",{ref:"companyName",attrs:{outlined:"",square:"",type:"text",color:"primary",label:"Company Name",rules:[function(t){return t&&t.length>0||"Please enter your Company Name"}],autocomplete:"off"},model:{value:t.accountDetails.companyName,callback:function(e){t.$set(t.accountDetails,"companyName",e)},expression:"accountDetails.companyName"}}),a("q-input",{ref:"firstName",attrs:{outlined:"",square:"",type:"text",color:"primary",label:"Username",rules:[function(t){return t&&t.length>0||"Please enter your Username"},t.isValidEmail],autocomplete:"off"},model:{value:t.accountDetails.username,callback:function(e){t.$set(t.accountDetails,"username",e)},expression:"accountDetails.username"}}),a("q-input",{ref:"password",attrs:{outlined:"",square:"",color:"primary",label:"Password",type:t.isPwd?"password":"text",rules:[function(t){return t&&t.length>0||"Please enter your Password"}],autocomplete:"off"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.accountDetails.password,callback:function(e){t.$set(t.accountDetails,"password",e)},expression:"accountDetails.password"}}),a("q-input",{ref:"firstName",attrs:{outlined:"",square:"",type:"text",color:"primary",label:"First Name",rules:[function(t){return t&&t.length>0||"Please enter your First Name"}],autocomplete:"off"},model:{value:t.accountDetails.firstName,callback:function(e){t.$set(t.accountDetails,"firstName",e)},expression:"accountDetails.firstName"}}),a("q-input",{ref:"middleName",attrs:{outlined:"",square:"",type:"text",color:"primary",label:"Middle Name",rules:[function(t){return t&&t.length>0||"Please enter your Middle Name"}],autocomplete:"off"},model:{value:t.accountDetails.middleName,callback:function(e){t.$set(t.accountDetails,"middleName",e)},expression:"accountDetails.middleName"}}),a("q-input",{ref:"lastName",attrs:{outlined:"",square:"",type:"text",color:"primary",label:"Last Name",rules:[function(t){return t&&t.length>0||"Please enter your Last Name"}],autocomplete:"off"},model:{value:t.accountDetails.lastName,callback:function(e){t.$set(t.accountDetails,"lastName",e)},expression:"accountDetails.lastName"}})],1),t.formMessage.length>0?a("q-card-section",[a("q-banner",{staticClass:"text-white bg-green",attrs:{"inline-actions":""}},[a("q-icon",{staticClass:"q-pr-md",attrs:{name:"fas fa-user-check",size:"lg"}}),t._v("\n                "+t._s(this.formMessage)+"\n              ")],1)],1):t._e(),a("q-card-actions",{staticClass:"flex flex-center q-pb-md"},[a("q-btn",{staticStyle:{width:"150px"},attrs:{type:"submit",loading:t.accountLoading,disable:t.accountLoading,push:"",icon:"fas fa-user-check",color:"green"},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner-hourglass",{staticClass:"on-left"}),t._v("\n                  Updating...\n                ")]},proxy:!0}])},[a("span",{staticClass:"q-pl-md"},[t._v("UPDATE")])])],1)],1)],1)],1),a("q-expansion-item",{staticClass:"shadow-1 overflow-hidden",staticStyle:{"border-radius":"30px"},attrs:{"expand-separator":"",icon:"fas fa-users",label:t.corporateDetails[0].Name.toUpperCase()+" DASHBOARD",group:"somegroup","header-class":"bg-primary text-white"}},[a("q-tabs",{staticClass:"bg-primary text-white shadow-2",attrs:{"inline-label":"",breakpoint:0,align:"justify"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"accessibility",label:"Accessibility"}}),a("q-tab",{attrs:{name:"preregistered",label:"Preregistered"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"accessibility"}},[a("registration-accessibility",{attrs:{corporateReservation:t.corporateReservation}})],1),a("q-tab-panel",{attrs:{name:"preregistered"}},[a("preregistered",{attrs:{corporateDetails:t.corporateDetails,preRegisteredList:t.preRegisteredList}})],1)],1)],1)],1)],1)],1)},l=[],p=a("89e6"),m=a("8674"),u={props:["corporateDetails"],name:"AdminCorporateDetailsDialog",components:{RegistrationAccessibility:m["a"],Preregistered:p["a"]},data(){return{tab:"accessibility",isPwd:!0,accountLoading:!1,formMessage:[],accountDetails:{companyName:null,companyProvince:null,companyAddress:null,companyContactNumber:null,username:null,password:null,firstName:null,middleName:null,lastName:null,companyID:null}}},watch:{tab(t){this.getCompanyPreregistrationList(),this.getReservationAccessibility()}},mounted(){this.getReservationAccessibility(),this.getCompanyPreregistrationList(),this.formatAccount()},computed:i()({},Object(r["b"])("corporate",["preRegisteredList","corporateReservation","cancelledPreregistered"])),methods:{isValidEmail(t){const e=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return e.test(t)||"Invalid email"},async onSubmitAccountUpdate(){this.accountLoading=!0;const t=await this.$store.dispatch("corporate/updateCorporateAccount",this.accountDetails);void 0!==t.message&&(this.formMessage=`You have successfully updated ${this.accountDetails.companyName}`),this.accountLoading=!1},formatAccount(){this.accountDetails.companyName=this.corporateDetails[0].Name,this.accountDetails.companyProvince=this.corporateDetails[0].Province,this.accountDetails.companyAddress=this.corporateDetails[0].Address,this.accountDetails.companyContactNumber=this.corporateDetails[0].ContactNumber,this.accountDetails.username=this.corporateDetails[0].UserName,this.accountDetails.firstName=this.corporateDetails[0].FirstName,this.accountDetails.middleName=this.corporateDetails[0].MiddleName,this.accountDetails.lastName=this.corporateDetails[0].LastName,this.accountDetails.companyID=this.corporateDetails[0].Id},async getCompanyPreregistrationList(){await this.$store.dispatch("corporate/getPreregisteredList",this.corporateDetails[0].Name)},async getReservationAccessibility(){const t={email:null,company:this.corporateDetails[0].ShortCode};await this.$store.dispatch("corporate/getReservationAccessibility",t)}}},d=u,y=a("2877"),h=a("f09f"),f=a("a370"),g=a("9c40"),v=a("05c0"),b=a("0016"),C=a("3b73"),x=a("0378"),w=a("27f9"),q=a("54e1"),N=a("4b7e"),F=a("9149"),P=a("429b"),D=a("7460"),L=a("eb85"),A=a("adad"),M=a("823b"),U=a("7f67"),k=a("eebe"),_=a.n(k),$=Object(y["a"])(d,c,l,!1,null,null,null),R=$.exports;_()($,"components",{QCard:h["a"],QCardSection:f["a"],QBtn:g["a"],QTooltip:v["a"],QIcon:b["a"],QExpansionItem:C["a"],QForm:x["a"],QInput:w["a"],QBanner:q["a"],QCardActions:N["a"],QSpinnerHourglass:F["a"],QTabs:P["a"],QTab:D["a"],QSeparator:L["a"],QTabPanels:A["a"],QTabPanel:M["a"]}),_()($,"directives",{ClosePopup:U["a"]});var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"1600px","max-width":"100vw"}},[a("q-card",{staticClass:"text-white"},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-left text-h5 text-white text-weight-thin"},[t._v("\n          REGISTER COMPANIES\n        ")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("CLOSE")])],1)],1)]),a("q-form",{ref:"companyRegistrationForm",staticClass:"q-gutter-md",on:{submit:t.onSubmitCompanyRegistration}},[a("q-card-section",[a("div",[a("q-expansion-item",{staticClass:"q-ma-md bg-primary text-white shadow-11",attrs:{"expand-separator":"",icon:"fas fa-building",label:this.companyForm.companyName.length>0?this.companyForm.companyName:"Company Name",group:"othergroup","default-opened":""}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-lg-6"},[a("q-input",{attrs:{square:"",outlined:"",type:"text",label:"Company Name",autofocus:"",rules:[function(t){return t&&t.length>0||"Please enter Company Name"}]},model:{value:t.companyForm.companyName,callback:function(e){t.$set(t.companyForm,"companyName",e)},expression:"companyForm.companyName"}}),a("q-select",{ref:"region",attrs:{outlined:"",square:"","use-input":"","input-debounce":"0",label:"Region",options:this.regionListOptions,behavior:"menu","lazy-rules":"",color:"primary",autocomplete:"off",rules:[function(t){return t&&t.length>0||"Please enter Region"}]},on:{filter:t.filterRegion},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                            No results\n                          ")])],1)]},proxy:!0}]),model:{value:t.companyForm.companyRegion,callback:function(e){t.$set(t.companyForm,"companyRegion",e)},expression:"companyForm.companyRegion"}}),a("q-select",{ref:"province",attrs:{outlined:"",square:"","use-input":"","input-debounce":"0",label:"Province",options:this.provincesListOptions,behavior:"menu","lazy-rules":"",color:"primary",autocomplete:"off",rules:[function(t){return t&&t.length>0||"Please enter Province"}]},on:{filter:t.filterProvinces},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                            No results\n                          ")])],1)]},proxy:!0}]),model:{value:t.companyForm.companyProvince,callback:function(e){t.$set(t.companyForm,"companyProvince",e)},expression:"companyForm.companyProvince"}}),a("q-select",{ref:"city",attrs:{outlined:"",square:"","use-input":"","input-debounce":"0",label:"City",options:this.citiesListOptions,behavior:"menu","lazy-rules":"",color:"primary",autocomplete:"off",rules:[function(t){return t&&t.length>0||"Please enter City"}]},on:{filter:t.filterCities},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                            No results\n                          ")])],1)]},proxy:!0}]),model:{value:t.companyForm.companyCity,callback:function(e){t.$set(t.companyForm,"companyCity",e)},expression:"companyForm.companyCity"}}),a("q-input",{attrs:{square:"",outlined:"",type:"text",label:"Company Address",rules:[function(t){return t&&t.length>0||"Please enter Company Address"}]},model:{value:t.companyForm.companyAddress,callback:function(e){t.$set(t.companyForm,"companyAddress",e)},expression:"companyForm.companyAddress"}}),a("q-input",{attrs:{square:"",outlined:"",type:"text",label:"Company Contact #",rules:[function(t){return t&&t.length>0||"Please enter Company Contact Number"}]},model:{value:t.companyForm.companyContactNumber,callback:function(e){t.$set(t.companyForm,"companyContactNumber",e)},expression:"companyForm.companyContactNumber"}})],1),a("div",{staticClass:"col-lg-6 q-pl-md"},[a("q-input",{attrs:{square:"",outlined:"",type:"text",label:"Contact Person First Name",rules:[function(t){return t&&t.length>0||"Please enter Contact Person First Name"}]},model:{value:t.companyForm.companyUserFirstName,callback:function(e){t.$set(t.companyForm,"companyUserFirstName",e)},expression:"companyForm.companyUserFirstName"}}),a("q-input",{attrs:{square:"",outlined:"",type:"text",label:"Contact Person Middle Name",rules:[function(t){return t&&t.length>0||"Please enter Contact Person Middle Name"}]},model:{value:t.companyForm.companyUserMiddleName,callback:function(e){t.$set(t.companyForm,"companyUserMiddleName",e)},expression:"companyForm.companyUserMiddleName"}}),a("q-input",{attrs:{square:"",outlined:"",type:"text",label:"Contact Person Last Name",rules:[function(t){return t&&t.length>0||"Please enter Contact Person Last Name"}]},model:{value:t.companyForm.companyUserLastName,callback:function(e){t.$set(t.companyForm,"companyUserLastName",e)},expression:"companyForm.companyUserLastName"}}),a("q-input",{attrs:{square:"",outlined:"",type:"email",label:"Company Account Email",rules:[function(t){return t&&t.length>0||"Please enter your Email"},t.isValidEmail]},model:{value:t.companyForm.companyUsername,callback:function(e){t.$set(t.companyForm,"companyUsername",e)},expression:"companyForm.companyUsername"}}),a("q-input",{attrs:{square:"",outlined:"",type:"password",label:"Company Account Password",hint:"The password is "+t.companyForm.companyPassword,rules:[function(t){return t&&t.length>0||"Please enter Account Password"}]},model:{value:t.companyForm.companyPassword,callback:function(e){t.$set(t.companyForm,"companyPassword",e)},expression:"companyForm.companyPassword"}})],1),a("div",{staticClass:"col-lg-12"},[a("q-input",{attrs:{square:"",outlined:"",label:"Generated Message to be sent to Email and Text Message",type:"textarea"},model:{value:t.companyForm.companyMessage,callback:function(e){t.$set(t.companyForm,"companyMessage",e)},expression:"companyForm.companyMessage"}})],1)])])],1)],1)],1)]),null!=t.formMessage?a("q-card-section",{staticClass:"flex flex-center"},[a("q-banner",{staticClass:"text-white bg-green",attrs:{"inline-actions":""}},[a("q-icon",{staticClass:"q-pr-md",attrs:{name:"fa fa-check",size:"lg"}}),t._v("\n          "+t._s(t.formMessage)+"\n        ")],1)],1):t._e(),a("q-card-actions",{staticClass:"flex flex-center q-pb-md"},[a("q-btn-group",[a("q-btn",{attrs:{type:"submit",push:"",icon:"fas fa-save",color:"primary",label:"Register Company"}})],1)],1)],1)],1)],1)},Q=[],E=(a("5319"),{name:"CompanyRegistrationDialog",data(){return{companyOptions:this.companies,companyLists:this.companies,regionListOptions:this.region,regionLists:this.region,provincesListOptions:this.provinces,provincesLists:this.provinces,citiesListOptions:this.cities,citiesLists:this.cities,companyForm:{companyName:[],companyShortCode:null,companyRegion:null,companyProvince:null,companyCity:null,companyAddress:null,companyContactNumber:null,companyUserFirstName:null,companyUserMiddleName:null,companyUserLastName:null,companyUsername:null,companyPassword:null,companyMessage:null},formMessage:null}},watch:{companyForm:{async handler(t){this.formatCompany(t)},deep:!0}},computed:i()({},Object(r["b"])({reservationHashKey:"reservationHashKey",region:"region",provinces:"provinces",companies:"companies",cities:"cities"})),mounted(){this.setRegion()},methods:{isValidEmail(t){const e=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return e.test(t)||"Invalid email"},setRegion(){for(var t=[],e=0;e<this.region.length;e++)t[e]=this.region[e].name;this.regionLists=t,this.regionLists=t},setInitValues(){this.companyForm.companyName=[],this.companyForm.companyShortCode=null,this.companyForm.companyRegion=null,this.companyForm.companyProvince=null,this.companyForm.companyCity=null,this.companyForm.companyAddress=null,this.companyForm.companyContactNumber=null,this.companyForm.companyUserFirstName=null,this.companyForm.companyUserMiddleName=null,this.companyForm.companyUserLastName=null,this.companyForm.companyUsername=null,this.companyForm.companyPassword=null,this.companyForm.companyMessage=null},onSubmitCompanyRegistration(){this.$refs.companyRegistrationForm.validate().then((async t=>{if(t){this.formMessage="";const t=this.cities.filter((t=>t.name===this.companyForm.companyCity)),a=t[0].TownCity.replace("_","").replace("_"," - "),s={companyName:this.companyForm.companyName,companyShortCode:this.companyForm.companyShortCode,companyRegion:this.companyForm.companyRegion,companyProvince:this.companyForm.companyProvince,companyCity:a,companyAddress:this.companyForm.companyAddress,companyContactNumber:this.companyForm.companyContactNumber,companyUserFirstName:this.companyForm.companyUserFirstName,companyUserMiddleName:this.companyForm.companyUserMiddleName,companyUserLastName:this.companyForm.companyUserLastName,companyUsername:this.companyForm.companyUsername,companyPassword:this.companyForm.companyPassword},o=await this.$store.dispatch("corporate/registerCompanies",s);if(void 0!==o.success){this.formMessage="You have successfully registered a company!";var e={messageType:"sms",destination:this.companyForm.companyContactNumber,text:this.companyForm.companyMessage};this.sendTextMessage(e),this.setInitValues()}}}))},async sendTextMessage(t){const e=this.$q.localStorage.getItem("smartAccessToken");if(null===e){const e=await this.$store.dispatch("setTextMessagingAuthentication");if(e.accessToken.length>0)return await this.$store.dispatch("sendTextMessage",t),{message:"success"};{const e=await this.$store.dispatch("refreshTextToken");if(e.accessToken.length>0)return await this.$store.dispatch("sendTextMessage",t),{message:"success"}}}else{const e=await this.$store.dispatch("sendTextMessage",t);if("Error"===e.name){const e=await this.$store.dispatch("refreshTextToken");if("Error"===e.name)return await this.$store.dispatch("setTextMessagingAuthentication"),await this.$store.dispatch("sendTextMessage",t),{message:"success"}}}},async formatCompany(t){if(null!==this.companyForm.companyName&&null!==this.companyForm.companyUserFirstName&&null!==this.companyForm.companyUserMiddleName&&null!==this.companyForm.companyUserLastName){const t=this.companyForm.companyName.replaceAll("-","_").replaceAll(" ","_"),o=t.split("_");var e="";if(this.companyForm.companyName.length>4){var a=[],s=[];o.forEach((function(t,e){t.indexOf(")")>-1?a.push(t.toUpperCase()):s.push(t.charAt(0).toUpperCase())})),console.log(a[0],"shortcode"),e=0===a.length?s.join(""):a[0].replaceAll("(","").replaceAll(")","")}else e=this.companyForm.companyName;const n=this.companyForm.companyUserFirstName.split(" "),i=[];n.forEach((function(t,e){i.push(t.charAt(0).toUpperCase())}));const r=i.join(""),c=this.companyForm.companyUserMiddleName.charAt(0),l=this.companyForm.companyUserLastName.replaceAll(" ",""),p=(new Date).toISOString().substr(0,10).replaceAll("-","");this.companyForm.companyPassword=`${e}@${r}${c}${l}-${p}`,this.companyForm.companyShortCode=e}if(null!==this.companyForm.companyUsername&&(this.companyForm.companyMessage=`Good day ${this.companyForm.companyUserFirstName} ${this.companyForm.companyUserLastName}!\n\nYou have been succesfully registered at the UERM RamVax COVID19 Application.\n          \nBelow is the link that you can access and also the credentials needed for you to login.\n\nLink: https://apps.uerm.edu.ph/vue/covid-vaccination/#/vaccine-application-corporate\nUsername: ${this.companyForm.companyUsername}\nPassword: ${this.companyForm.companyPassword}\n\nNote that you can change your password upon login. The RamVax Application is designed to give a secured accessibility links to your employees\nas well as monitor the schedule of their vaccination. \n\nThank you very much and stay safe.\n\n- UERM Vaccine Team`),null!==t.companyRegion){if(0===t.companyProvince.length){await this.$store.dispatch("getProvinces",t.companyRegion);for(var o=[],n=0;n<this.provinces.length;n++)"National Capital Region"===t.companyRegion?o[n]=this.provinces[n].provinceWithCity:o[n]=this.provinces[n].name;this.provincesListOptions=o,this.provincesLists=o}if(0!==this.provinces.length){var i="";if("National Capital Region"===t.companyRegion){var r=this.provinces.filter((e=>e.provinceWithCity===t.companyProvince));r.length>0&&(i=this.provinces.filter((t=>t.name===r[0].name)))}else i=this.provinces.filter((e=>e.name===t.companyProvince));if(void 0!==i&&i.length>0&&0===t.companyCity.length){await this.$store.dispatch("getCities",i[0].shortCode);for(var c=[],l=0;l<this.cities.length;l++)c[l]=this.cities[l].name;this.citiesListOptions=c,this.citiesLists=c}}}},filterRegion(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.regionListOptions=this.regionLists.filter((t=>t.toLowerCase().indexOf(e)>-1))}:()=>{this.regionListOptions=this.regionLists,this.companyForm.companyProvince=[],this.companyForm.companyCity=[]})},filterProvinces(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.provincesListOptions=this.provincesLists.filter((t=>t.toLowerCase().indexOf(e)>-1))}:()=>{this.provincesListOptions=this.provincesLists,this.companyForm.companyCity=[]})},filterCities(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.citiesListOptions=this.citiesLists.filter((t=>t.toLowerCase().indexOf(e)>-1))}:()=>{this.citiesListOptions=this.citiesLists})},filterCompanies(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.companyOptions=this.companyLists.filter((t=>t.toLowerCase().indexOf(e)>-1))}:()=>{this.companyOptions=this.companyLists})}}}),O=E,I=(a("1373"),a("ddd8")),T=a("66e5"),V=a("4074"),j=a("e7a9"),z=Object(y["a"])(O,S,Q,!1,null,null,null),B=z.exports;_()(z,"components",{QCard:h["a"],QCardSection:f["a"],QBtn:g["a"],QTooltip:v["a"],QForm:x["a"],QExpansionItem:C["a"],QInput:w["a"],QSelect:I["a"],QItem:T["a"],QItemSection:V["a"],QBanner:q["a"],QIcon:b["a"],QCardActions:N["a"],QBtnGroup:j["a"]}),_()(z,"directives",{ClosePopup:U["a"]});var Z={name:"AdminCorporateDashboard",components:{CompanyRegistrationDialog:B,AdminCorporateDetailsDialog:R},data(){return{pagination:{rowsPerPage:0},selected:[],filter:"",loading:null,columns:[{name:"companyName",label:"Company",align:"left",field:"companyName",sortable:!0},{name:"contactNumber",align:"left",label:"Contact Number",field:"contactNumber",sortable:!0},{name:"contactPerson",label:"Contact Person",field:"contactPerson",align:"left",sortable:!0},{name:"contactPersonUsername",label:"Contact Person Username",field:"contactPersonUsername",align:"left",sortable:!0},{name:"active",label:"Enabled",field:"active",align:"center",sortable:!0}],companyModal:!1,corporateModal:!1,corporateDetails:[],uploadModal:null}},computed:i()({},Object(r["b"])("corporate",["rawCompanies"])),mounted(){this.setInitValues(),this.redirect()},watch:{companyModal(t){this.setInitValues()},selected(t){t.length>0&&(this.corporateModal=!0,this.corporateDetails=t)},async corporateModal(t){this.setInitValues(),t||(this.selected=[],await this.$store.dispatch("corporate/setInitValuesCorporate"))}},methods:{setInitValuesCompany(){this.showAddCompanies=!1,this.reservationData.companyName=null,this.companyInformation.companyName=null,this.companyInformation.companyRegion=null,this.companyInformation.companyProvince=null,this.companyInformation.companyCity=null,this.companyInformation.companyAddress=null,this.companyInformation.companyContactNumber=null},async setInitValues(){this.loading=!0,await this.$store.dispatch("setInitValuesVAS"),await this.$store.dispatch("corporate/getCompanies"),this.loading=!1},redirect(){const t=this.$q.cookies.get("module");"Screening"===t?this.$router.push("/vaccine-application-screening"):"Vaccination"===t?this.$router.push("/vaccine-application-vaccination"):"Monitoring"===t?this.$router.push("/vaccine-application-monitoring"):"Registration"===t?this.$router.push("/vaccine-application-registration"):null===t&&this.$router.push("/vaccine-application")},openCompanyModal(){this.companyModal=!0},openUploadModal(){this.uploadModal=!0}}},G=Z,H=a("9989"),Y=a("eaac"),W=a("74f7"),J=a("bd08"),K=a("db86"),X=a("9564"),tt=a("b047"),et=a("24e8"),at=Object(y["a"])(G,s,o,!1,null,null,null);e["default"]=at.exports;_()(at,"components",{QPage:H["a"],QCard:h["a"],QCardSection:f["a"],QBtnGroup:j["a"],QBtn:g["a"],QTooltip:v["a"],QTable:Y["a"],QInput:w["a"],QIcon:b["a"],QInnerLoading:W["a"],QTr:J["a"],QTd:K["a"],QToggle:X["a"],QChip:tt["a"],QDialog:et["a"]}),_()(at,"directives",{ClosePopup:U["a"]})}}]);