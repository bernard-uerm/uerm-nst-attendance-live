(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{a1cf:function(t,e,a){"use strict";a("fc85")},a303:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"row items-center justify-center"},[a("q-form",{ref:"personalInformation",staticClass:"q-gutter-md q-pa-md",on:{submit:t.getAnalyticsData}},[a("q-card",[a("q-card-section",{staticClass:"bg-primary text-h3 text-weight-thin q-dark",attrs:{align:"center"}},[t._v("\n        UERM NST DASHBOARD\n      ")]),a("q-card-section",{attrs:{align:"center"}},[a("q-input",{staticClass:"q-pa-md",staticStyle:{width:"220px"},attrs:{outlined:"",mask:"date",label:"Date",rules:["date"],hint:"From Date (YYYY/MM/DD)"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn-group",[this.tableData.length>0?a("q-btn",{staticStyle:{width:"140px"},attrs:{type:"button",push:"",icon:"print",label:"PRINT",color:"secondary"},on:{click:t.generatePDF}}):t._e()],1)],1),a("q-card-section",{attrs:{align:"center"}},[a("div",{staticClass:"row justify-center text-white"},[a("div",{staticClass:"col-lg-12 col-md-12 col-sm-6 col-xs-12"},[a("q-table",{staticStyle:{"max-height":"415px","overflow-y":"auto",width:"1000px","overflow-x":"auto"},attrs:{dense:"","virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0],data:this.tableData,columns:t.columns,"row-key":"id",filter:t.filter,loading:t.loading,title:"DAILY TIME IN - "+this.fromDate},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-select",{staticClass:"q-pt-lg q-mr-lg",attrs:{outlined:"",square:"","bottom-slots":"",options:t.departments,label:"Departments",dense:"","options-dense":!0},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"local_hospital"},on:{click:function(t){t.stopPropagation()}}})]},proxy:!0}]),model:{value:t.department,callback:function(e){t.department=e},expression:"department"}}),a("q-select",{staticClass:"q-pt-lg q-mr-lg",staticStyle:{width:"170px"},attrs:{outlined:"",square:"","bottom-slots":"",options:t.shifts,label:"Shift",dense:"","options-dense":!0},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"alarm_on"},on:{click:function(t){t.stopPropagation()}}})]},proxy:!0}]),model:{value:t.shift,callback:function(e){t.shift=e},expression:"shift"}}),a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"code",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.code)+"\n                  ")]),a("q-td",{key:"name",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.Name)+"\n                  ")]),a("q-td",{key:"department",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.DEPTDESC)+"\n                  ")]),a("q-td",{key:"timeIn",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.DateTimeCreated)+"\n                  ")]),a("q-td",{key:"shift",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.ShiftID)+"\n                  ")])],1)]}}])})],1)]),a("div",[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[a("vue-html2pdf",{ref:"nstHTMLToPDF",attrs:{"show-layout":!1,"float-layout":!0,"enable-download":!1,"preview-modal":!0,"paginate-elements-by-height":1400,filename:"NST Attendance","pdf-quality":2,"manual-pagination":!0,"pdf-format":"a4","pdf-orientation":"portrait","pdf-content-width":"1000px","pdf-content-height":"800px","html-to-pdf-options":t.htmlToPdfOptions},on:{beforeDownload:function(e){return t.beforeDownload(e)}}},[a("section",{staticStyle:{width:"800px",height:"100%"},attrs:{slot:"pdf-content"},slot:"pdf-content"},[a("VuePDF",{attrs:{pdfDetails:this.printedReport,employeeCount:t.employeeCount,page:t.pages}})],1)])],1)],1)])],1)],1)],1)},i=[],s=a("ded3"),o=a.n(s),r=a("2f62"),l=a("6480"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{ref:"pdf-content",staticClass:"pdf-item"},[a("div",{staticClass:"text-h5 text-center"},[t._v("\n      UERM NST ATTENDANCE\n    ")])]),a("section",{ref:"pdf-content",staticClass:"pdf-item"},t._l(t.pdfDetails,(function(e,n){return a("div",{key:n,staticClass:"q-pa-md",staticStyle:{border:"0px solid black","margin-right":"3%","padding-top":"1px"}},[a("div",{staticClass:"text-weight-bold text-uppercase",staticStyle:{"font-size":"16px"}},[t._v("\n        "+t._s(e.name)+"\n      ")]),a("hr",{staticStyle:{border:"1px solid black"}}),t._l(e.shifts,(function(e,n){return a("div",{key:n},[e.employees.length>0?a("div",{staticStyle:{"padding-left":"5%","font-weight":"bold"}},[t._v("\n          "+t._s(e.shift)+"\n        ")]):t._e(),t._l(e.employees,(function(e,n){return a("div",{key:n},[a("table",{staticStyle:{width:"100%","border-collapse":"collapse"}},[a("tr",[a("td",{staticStyle:{width:"14%","text-align":"right"}},[t._v(" "+t._s(e.code)+" ")]),a("td",{staticStyle:{"padding-left":"5%"}},[t._v(" "+t._s(e.Name)+" ")]),a("td"),a("td",{staticStyle:{width:"30%"}},[t._v(" "+t._s(e.DateTimeCreated)+" ")])])])])}))],2)}))],2)})),0)])},d=[],p={props:["pdfDetails","employeeCount"],name:"VuePDF",created(){console.log(this.employeeCount)}},f=p,m=a("2877"),u=Object(m["a"])(f,c,d,!1,null,null,null),h=u.exports,g={components:{VueHtml2pdf:l["a"],VuePDF:h},name:"Dashboard",data(){return{fromDate:null,formattedDate:null,filter:"",pagination:{rowsPerPage:0},shift:"All Shift",shifts:["All Shift","First Shift","Second Shift","Third Shift"],department:"ALL DEPARTMENTS",loading:null,columns:[{name:"code",label:"Employee ID",align:"left",field:"code",sortable:!0},{name:"name",align:"center",label:"Fullname",field:"Name",sortable:!0},{name:"department",align:"center",label:"Department",field:"DEPTDESC",sortable:!0},{name:"timeIn",align:"center",label:"Time In",field:"DateTimeCreated",sortable:!0},{name:"shift",align:"center",label:"Shift",field:"ShiftID",sortable:!0}],printed:"Unprinted",tableData:[],showPDF:!1,htmlToPdfOptions:{margin:[.2,0,.9,0],filename:"contractproduct3.pdf",enableLinks:!0,image:{type:"jpeg",quality:.98},html2canvas:{scale:1,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}},pages:[]}},computed:o()({},Object(r["b"])({analyticsData:"dashboard/analyticsData",allAnalyticsData:"dashboard/allAnalyticsData",printedReport:"dashboard/printedReport",employeeCount:"dashboard/employeeCount",departments:"dashboard/departments"})),watch:{async shift(t){await this.getAnalyticsData()},async department(t){await this.getAnalyticsData()},async fromDate(t){await this.getAnalyticsData()}},mounted(){this.setDate()},methods:{setDate(){const t=new Date,e=new Intl.DateTimeFormat("en",{year:"numeric"}).format(t),a=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(t),n=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(t),i=`${e}-${a}-${n}`;this.fromDate=i,this.getAnalyticsData()},async getAnalyticsData(){this.loading=!0;var t="";t="First Shift"===this.shift?1:"Second Shift"===this.shift?2:"Third Shift"===this.shift?3:"";const e={inclusiveDate:this.fromDate,shift:t,department:this.department};await this.$store.dispatch("dashboard/fetchAnalyticsData",e),this.tableData=this.analyticsData,this.loading=!1},async generatePDF(){await this.$refs.nstHTMLToPDF.generatePdf()},async beforeDownload({html2pdf:t,options:e,pdfContent:a}){await t().set(e).from(a).toPdf().get("pdf").then((t=>{const e=t.internal.getNumberOfPages();for(let a=1;a<=e;a++)t.setPage(a),t.setFontSize(10),t.setTextColor(150),t.text("Page "+a+" of "+e,.88*t.internal.pageSize.getWidth(),t.internal.pageSize.getHeight()-.3);this.pages=e}))}}},y=g,D=(a("a1cf"),a("9989")),b=a("0378"),w=a("f09f"),v=a("a370"),S=a("27f9"),q=a("0016"),x=a("7cbe"),_=a("52ee"),C=a("9c40"),k=a("4b7e"),T=a("e7a9"),P=a("eaac"),A=a("9564"),F=a("ddd8"),I=a("74f7"),Q=a("bd08"),E=a("db86"),N=a("7f67"),O=a("eebe"),R=a.n(O),j=Object(m["a"])(y,n,i,!1,null,"10f11a74",null);e["default"]=j.exports;R()(j,"components",{QPage:D["a"],QForm:b["a"],QCard:w["a"],QCardSection:v["a"],QInput:S["a"],QIcon:q["a"],QPopupProxy:x["a"],QDate:_["a"],QBtn:C["a"],QCardActions:k["a"],QBtnGroup:T["a"],QTable:P["a"],QToggle:A["a"],QSelect:F["a"],QInnerLoading:I["a"],QTr:Q["a"],QTd:E["a"]}),R()(j,"directives",{ClosePopup:N["a"]})},fc85:function(t,e,a){}}]);